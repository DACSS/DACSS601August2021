---
title: "organinc egg poultry wrangling - hw2"
description: |
  Data on organic egg & poultry prices in the US from 2004-2013.
author: Shubham Mishra
date: 08-25-2021
categories:
- homework 2
- Organic Egg and Poultry
- bakharia
output:
  distill::distill_article:
    self_contained: false
draft: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```
**Loading Library**
```{r}
library(tidyverse)
```

**Loading Organic Egg/Poultry Dataset**
```{r}
df = readxl::read_excel('../../_data/organiceggpoultry.xls', skip = 4, sheet = 'Data')
head(df)
```
*Renaming the columns as per the requirement and remeoving the empty columns (labelled as Empty)*
```{r}
names(df) <- c('Months', 'Extra Large Dozen', 'Extra Large 1/2 Doz. 1/2 Dozen', 'Large Dozen', 'Large 1/2 Doz.', 'Empty', 'Whole', 'B/S Breast', 'Bone-in Breast', 'Whole Legs', 'Thighs')

print(names(df))
```
```{r}
dplyr::select(df, -Empty)
head(df)
```
*Splitting the Months column using str_split using regex expressions to make a seperate column, Months* 
```{r}
loop <- c(1:120)
li = c()
year <-  0
for(i in loop){
  if (substr(unlist(split(df$Months[i], " ")), 1, 3) == "Jan"){
    year <- substr(unlist(split(df$Months[i], " ")), 5, 8)
    li <- c(li, year)
    df$Months[i] <- "January"
  }
  else{
    li <- c(li, year)
  }
  if(df$`Bone-in Breast`[i] == "too few"){
    df$`Bone-in Breast`[i] <- NA
  }
  if (df$Thighs[i] == 'too few'){
    df$Thighs[i] <- NaN
  }
}
```
*Checking the formatted table*
```{r}
df$Year <- li
df <- df[,c('Months', 'Year', 'Extra Large Dozen', 'Extra Large 1/2 Doz. 1/2 Dozen', 'Large Dozen', 'Large 1/2 Doz.', 'Whole', 'B/S Breast', 'Bone-in Breast', 'Whole Legs', 'Thighs')]
head(df)
```
*Final Formatting: adding an index column which stores Months and Year in Date Format which makes it easier to plot as a time-series graph*
```{r}
index <- c()
for (i in loop){
  index <- c(index, paste(substr(df$Months[i],1,3),substr(df$Year[i], 3,4)))
}
df$index <- index
df
```

```{r}
# Writing of csv file
## write.csv(df, '_data/organiceggpoultry_filtered.csv', row.names = FALSE)
```
